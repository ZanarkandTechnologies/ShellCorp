# MEMORY

2026-02-22 17:37 +0800 | decision | MEM-0001 | docs-state,invariant | Canonical project planning/memory state lives under docs/: prd.md, specs/*, progress.md, HISTORY.md, MEMORY.md.
2026-02-22 17:37 +0800 | decision | MEM-0002 | brand,invariant | Product name is Fahrenheit; agent persona is Blitz; company/legal name remains Zanarkand Technologies.
2026-02-22 17:37 +0800 | decision | MEM-0003 | runtime,invariant | Default runtime/config storage root is ~/.fahrenheit and provider ingest env vars use the FAHRENHEIT_* prefix.
2026-02-23 02:19 +0800 | decision | MEM-0004 | ontology,invariant | Canonical ontology is the product abstraction boundary: providers map into Task/Project/Goal/CrmRecord contracts and text-defined mappings must produce a transparent artifact with confidence-gated writes.
2026-02-23 02:29 +0800 | decision | MEM-0005 | security,invariant | All layers enforce secure-by-default behavior: restricted gateway exposure, trusted-skill defaults, memory trust labels, and approval-gated external writes under low confidence or high impact.
2026-02-23 02:35 +0800 | decision | MEM-0006 | architecture,invariant | System architecture separates engagement and observational memory pipelines; both flows consume one unified ontology/context RPC so agent responsiveness and long-horizon memory quality can evolve independently.
2026-02-23 15:10 +0800 | decision | MEM-0007 | routing,invariant | Routing/session behavior is binding-driven and agent-namespaced with legacy fallback; ingress uses idempotency and state-version metadata, and scheduler persistence includes both job definitions and run history.
2026-02-24 05:20 +0800 | decision | MEM-0010 | memory,invariant | Observational memory persists workflow/event deltas (not source-system clones) as structured entries carrying provenance (`source`, `sourceRef`) plus partition tags (`projectTags`, `roleTags`) and trust class for least-privilege retrieval.
2026-02-24 05:20 +0800 | decision | MEM-0011 | memory,safety,invariant | Default auto-promotion allows only trusted/system sources into `MEMORY.md`; untrusted observations remain history-only pending explicit approval, and compression must snapshot `HISTORY.md` before truncation.
2026-02-24 06:15 +0800 | decision | MEM-0012 | connectors,invariant | Connector bootstrap must follow a free-form profile contract (ontology/tools/workflow/fetch/transform instructions) and produce proof evidence before operational commit.
2026-02-24 06:15 +0800 | decision | MEM-0013 | connectors,isolation,invariant | Connector-driven observations must carry explicit partition metadata (`workspaceName`, `projectTags`, `roleTags`) and pass per-connector confidence/write gates to prevent context pollution across projects.
2026-02-24 06:30 +0800 | decision | MEM-0014 | runtime,controls,invariant | Chat-native operational controls are slash-command based (`/config`, `/cron`) and routed through the gateway RPC bridge instead of ad-hoc shell calls.
2026-02-24 06:30 +0800 | decision | MEM-0015 | security,controls,invariant | Chat-initiated config/cron writes require explicit confirmation (`--confirm`) and must pass gateway tool allow/deny policy checks before execution.
2026-02-24 06:50 +0800 | decision | MEM-0016 | ui,memory,invariant | Gateway memory visualization is read-only in MVP and prioritizes operational signal views (blocker/risk/upsell/improvement) with project/trust filters before any write controls.
2026-02-24 06:50 +0800 | decision | MEM-0017 | api,memory,invariant | Memory read-model endpoints are separate from mutation endpoints to preserve safety boundaries: UI reads via `/memory/*`, while writes remain gated through explicit RPC methods.
2026-02-24 04:00 +0800 | decision | MEM-0008 | runtime,invariant | Session busy handling is explicit policy (`queue` default, `steer` opt-in) resolved per routing group and enforced by runtime per session key.
2026-02-24 04:00 +0800 | decision | MEM-0009 | observability,invariant | Correlation IDs are propagated across inbound routing, runtime actions, outbound responses, and scheduler/heartbeat logs for replay-safe tracing.
2026-02-24 21:10 +0800 | decision | MEM-0018 | memory,partitioning,invariant | Every observational-memory write requires `groupId` and `sessionKey`; memory reads default to partition filters to prevent cross-group leakage.
2026-02-24 21:10 +0800 | decision | MEM-0019 | scheduler,memory,invariant | Scheduler defaults to one nightly rollup cron per active group (`group:<id>:daily-rollup`) and writes DB-first rollup observations with guardrails (caps, dedupe, pending review).
2026-02-24 22:05 +0800 | decision | MEM-0020 | onboarding,connectors,invariant | Connector onboarding is hybrid: auto-discover sources, generate mapping/skill proposals with confidence, and require explicit commit before writing connector mappings.
2026-02-24 22:05 +0800 | decision | MEM-0021 | memory,partitioning,invariant | Operational memory uses dual-required partition keys (`projectId`, `groupId`) for writes and default reads; `sessionKey` remains runtime context, not primary knowledge scope.
